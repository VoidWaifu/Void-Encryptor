<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Void Encryptor</title>
    <link rel="icon" type="image/png" href="../icon.png">
    <style>
        :root {
            --primary: #8a2be2;
            --primary-dark: #6a1cb0;
            --secondary: #00bfff;
            --dark: #0f0f23;
            --darker: #0a0a18;
            --light: #e0e0ff;
            --gray: #3a3a4a;
            --success: #00cc88;
            --error: #ff4d6d;
            --warning: #ffaa00;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        html, body {
            background: linear-gradient(135deg, var(--darker) 0%, var(--dark) 100%);
            color: var(--light);
            min-height: 100vh;
            height: 100%;
            overflow-x: hidden;
            overscroll-behavior: none;
        }
        
        body {
            padding: 15px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            height: auto;
        }
        
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--gray);
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .logo-icon {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 18px;
        }
        
        h1 {
            font-size: 1.8rem;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 3px;
        }
        
        .subtitle {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .header-actions {
            display: flex;
            gap: 12px;
        }
        
        .lang-switcher {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 18px;
            color: var(--light);
            padding: 7px 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }
        
        .lang-switcher:hover {
            background: rgba(255, 255, 255, 0.15);
        }
        
        .my-site-btn {
            background: linear-gradient(90deg, var(--primary), var(--primary-dark));
            border: none;
            border-radius: 18px;
            color: white;
            padding: 7px 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.3s ease;
            text-decoration: none;
            font-size: 0.9rem;
        }
        
        .my-site-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(138, 43, 226, 0.4);
        }
        
        .tab-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            margin-bottom: 25px;
        }
        
        .tabs {
            display: flex;
            background: rgba(0, 0, 0, 0.3);
        }
        
        .tab {
            flex: 1;
            padding: 16px 10px;
            text-align: center;
            background: transparent;
            border: none;
            color: var(--light);
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .tab:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            transition: all 0.3s ease;
            transform: translateX(-50%);
        }
        
        .tab.active {
            background: rgba(255, 255, 255, 0.05);
        }
        
        .tab.active:after {
            width: 100%;
        }
        
        .tab-content {
            display: none;
            padding: 25px 20px;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--secondary);
        }
        
        textarea, input[type="text"], input[type="password"], input[type="number"] {
            width: 100%;
            padding: 14px;
            border-radius: 8px;
            border: 1px solid var(--gray);
            background: rgba(0, 0, 0, 0.3);
            color: var(--light);
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        textarea:focus, input[type="text"]:focus, input[type="password"]:focus, input[type="number"]:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(138, 43, 226, 0.3);
        }
        
        textarea {
            min-height: 140px;
            resize: vertical;
            white-space: pre-wrap;
        }
        
        .password-group {
            display: flex;
            gap: 12px;
            align-items: flex-start;
        }
        
        .password-group input {
            flex: 1;
        }
        
        .password-actions {
            display: flex;
            gap: 8px;
        }
        
        .btn {
            padding: 12px 18px;
            background: linear-gradient(90deg, var(--primary), var(--primary-dark));
            border: none;
            border-radius: 8px;
            color: white;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(138, 43, 226, 0.4);
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .btn-success {
            background: linear-gradient(90deg, var(--success), #00aa77);
        }
        
        .btn-warning {
            background: linear-gradient(90deg, var(--warning), #cc8800);
        }
        
        .file-upload-area {
            border: 2px dashed var(--gray);
            border-radius: 8px;
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(0, 0, 0, 0.2);
        }
        
        .file-upload-area:hover {
            border-color: var(--primary);
            background: rgba(0, 0, 0, 0.3);
        }
        
        .file-upload-area p {
            margin-top: 8px;
            opacity: 0.8;
        }
        
        .file-list {
            margin-top: 12px;
            max-height: 180px;
            overflow-y: auto;
        }
        
        .file-list::-webkit-scrollbar {
            width: 5px;
        }
        
        .file-list::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 3px;
        }
        
        .file-list::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 3px;
        }
        
        .file-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 6px;
            margin-bottom: 8px;
        }
        
        .file-name {
            flex-grow: 1;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }
        
        .file-icon {
            width: 18px;
            height: 18px;
            color: var(--secondary);
        }
        
        .remove-file {
            background: rgba(255, 0, 0, 0.3);
            border: none;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.85rem;
        }
        
        .remove-file:hover {
            background: rgba(255, 0, 0, 0.5);
        }
        
        .result-section {
            margin-top: 25px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            display: none;
            border-left: 4px solid var(--success);
        }
        
        .result-section h3 {
            margin-bottom: 12px;
            color: var(--success);
        }
        
        .action-buttons {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }
        
        .decrypted-content {
            margin-top: 15px;
            padding: 12px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 6px;
            white-space: pre-wrap;
            max-height: 250px;
            overflow-y: auto;
        }
        
        .decrypted-content::-webkit-scrollbar {
            width: 5px;
        }
        
        .decrypted-content::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 3px;
        }
        
        .decrypted-content::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 3px;
        }
        
        .file-preview {
            margin-top: 15px;
        }
        
        .preview-item {
            margin-bottom: 15px;
            padding: 12px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 6px;
        }
        
        .preview-image {
            max-width: 100%;
            max-height: 250px;
            border-radius: 4px;
            display: block;
            margin: 8px 0;
        }
        
        .preview-audio, .preview-video {
            width: 100%;
            margin-top: 8px;
            border-radius: 4px;
        }
        
        .download-btn {
            margin-top: 8px;
        }
        
        .notification-container {
            position: fixed;
            top: 15px;
            right: 15px;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 8px;
            max-height: calc(100vh - 30px);
            overflow: hidden;
        }
        
        .notification {
            padding: 12px 16px;
            background: rgba(0, 0, 0, 0.8);
            border-radius: 8px;
            color: white;
            transform: translateX(150%);
            transition: all 0.4s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            border-left: 4px solid var(--success);
            max-width: 320px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        .notification.error {
            border-left-color: var(--error);
        }
        
        .notification.warning {
            border-left-color: var(--warning);
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.hiding {
            opacity: 0;
            transform: translateX(150%) scale(0.8);
        }
        
        .security-info {
            margin-top: 25px;
            padding: 16px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            border-left: 4px solid var(--secondary);
        }
        
        .security-info h3 {
            margin-bottom: 8px;
            color: var(--secondary);
        }
        
        .progress-container {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            margin: 15px 0;
            overflow: hidden;
            display: none;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 3px;
            width: 0%;
            transition: width 0.4s ease;
        }
        
        .progress-text {
            text-align: center;
            margin-top: 8px;
            color: var(--secondary);
            font-size: 0.85rem;
        }
        
        .selected-file {
            margin-top: 12px;
            padding: 10px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 6px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .password-strength {
            margin-top: 8px;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
        }
        
        .password-strength-bar {
            height: 100%;
            width: 0%;
            transition: all 0.3s ease;
        }
        
        .password-strength.weak .password-strength-bar {
            background: var(--error);
            width: 25%;
        }
        
        .password-strength.medium .password-strength-bar {
            background: var(--warning);
            width: 50%;
        }
        
        .password-strength.strong .password-strength-bar {
            background: var(--success);
            width: 75%;
        }
        
        .password-strength.very-strong .password-strength-bar {
            background: var(--success);
            width: 100%;
        }
        
        .password-strength-text {
            font-size: 0.8rem;
            margin-top: 4px;
            text-align: right;
            opacity: 0.8;
        }
        
        .password-options {
            display: none;
            margin-top: 15px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            border: 1px solid var(--gray);
        }
        
        .password-options.active {
            display: block;
            animation: slideDown 0.3s ease;
        }
        
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }
        
        .option-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .option-row {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 0;
        }
        
        .option-row label {
            margin: 0;
            flex: 1;
            font-size: 0.9rem;
            color: var(--light);
        }
        
        .option-row input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: var(--primary);
        }
        
        .option-row input[type="number"] {
            width: 80px;
            padding: 8px 12px;
        }
        
        .generate-btn-container {
            margin-top: 15px;
            grid-column: 1 / -1;
        }
        
        .generate-btn-container .btn {
            width: 100%;
            justify-content: center;
        }
        
        textarea::-webkit-scrollbar {
            width: 5px;
        }
        
        textarea::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 3px;
        }
        
        textarea::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 3px;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
                height: auto;
                min-height: 100vh;
                overflow-y: auto;
            }
            
            header {
                flex-direction: row;
                gap: 15px;
                text-align: left;
                margin-bottom: 15px;
                padding-bottom: 12px;
            }
            
            .logo {
                gap: 10px;
            }
            
            .logo-icon {
                width: 32px;
                height: 32px;
                font-size: 16px;
            }
            
            h1 {
                font-size: 1.5rem;
            }
            
            .subtitle {
                font-size: 0.8rem;
            }
            
            .header-actions {
                gap: 8px;
            }
            
            .lang-switcher, .my-site-btn {
                padding: 6px 10px;
                font-size: 0.8rem;
            }
            
            .tab {
                padding: 14px 8px;
                font-size: 0.9rem;
            }
            
            .tab-content {
                padding: 20px 15px;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
                padding: 14px 16px;
                font-size: 0.9rem;
            }
            
            .password-group {
                flex-direction: column;
                gap: 10px;
            }
            
            .password-actions {
                width: 100%;
                justify-content: space-between;
            }
            
            .password-actions .btn {
                width: 48%;
                font-size: 0.85rem;
                padding: 10px 12px;
            }
            
            .notification-container {
                right: 8px;
                left: 8px;
                top: 8px;
                max-width: calc(100% - 16px);
            }
            
            .notification {
                max-width: 100%;
                padding: 10px 14px;
            }
            
            .file-upload-area {
                padding: 20px;
            }
            
            .password-options {
                padding: 15px;
            }
            
            .options-grid {
                grid-template-columns: 1fr;
                gap: 12px;
            }
            
            .option-row {
                padding: 6px 0;
            }
        }
        
        @media (max-width: 480px) {
            .header-actions {
                flex-direction: column;
                gap: 6px;
            }
            
            .password-actions {
                flex-direction: column;
                gap: 8px;
            }
            
            .password-actions .btn {
                width: 100%;
            }
            
            .password-options {
                padding: 12px;
            }
            
            .option-row {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }
            
            .option-row input[type="number"] {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <div class="logo-icon">
                    <svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M15 8a3 3 0 0 1 3 3v5a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-5a3 3 0 0 1 3-3V5a5 5 0 1 1 10 0v3zM7 5v3h6V5a3 3 0 0 0-6 0z"/>
                    </svg>
                </div>
                <div>
                    <h1>Void Encryptor</h1>
                    <p class="subtitle" id="subtitle">Безопасное шифрование для ваших файлов</p>
                </div>
            </div>
            <div class="header-actions">
                <button class="lang-switcher" id="lang-switcher">
                    <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zM7 14.5v-3h2v3c2.5-.5 4-2.5 4-5H3c0 2.5 1.5 4.5 4 5z"/>
                    </svg>
                    <span id="lang-text">EN</span>
                </button>
                <a href="https://voidwaifu.github.io/VoidWaifu/" target="_blank" class="my-site-btn">
                    <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h13zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13z"/>
                        <path d="M3 8.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5z"/>
                    </svg>
                    <span id="my-site-text">Мой сайт</span>
                </a>
            </div>
        </header>
        
        <div class="tab-container">
            <div class="tabs">
                <button class="tab active" data-tab="encrypt">
                    <svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M15 8a3 3 0 0 1 3 3v5a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-5a3 3 0 0 1 3-3V5a5 5 0 1 1 10 0v3zM7 5v3h6V5a3 3 0 0 0-6 0z"/>
                    </svg>
                    <span id="encrypt-tab-text">Зашифровать</span>
                </button>
                <button class="tab" data-tab="decrypt">
                    <svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M15 8h1a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h1V5a5 5 0 1 1 10 0v3zM7 5v3h6V5a3 3 0 0 0-6 0z"/>
                    </svg>
                    <span id="decrypt-tab-text">Расшифровать</span>
                </button>
            </div>
            
            <div id="encrypt-tab" class="tab-content active">
                <h2 id="encrypt-title">Зашифровать данные</h2>
                
                <div class="form-group">
                    <label for="encrypt-text" id="encrypt-text-label">Текст для шифрования:</label>
                    <textarea id="encrypt-text" placeholder="Введите текст, который хотите зашифровать..."></textarea>
                </div>
                
                <div class="form-group">
                    <label id="file-input-label">Добавить файлы (изображения, аудио, видео, другое):</label>
                    <div class="file-upload-area" id="file-upload-area">
                        <svg width="36" height="36" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                            <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
                        </svg>
                        <p id="file-upload-text">Нажмите для выбора файлов</p>
                        <input type="file" id="file-input" multiple style="display: none;">
                    </div>
                    <div class="file-list" id="file-list"></div>
                </div>
                
                <div class="form-group">
                    <label for="password" id="password-label">Пароль:</label>
                    <div class="password-group">
                        <input type="password" id="password" placeholder="Введите пароль для шифрования" oninput="checkPasswordStrength()" autocomplete="new-password">
                        <div class="password-actions">
                            <button class="btn btn-secondary" onclick="showPasswordOptions()" id="create-password-btn">
                                <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
                                    <path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zM7 14.5v-3h2v3c2.5-.5 4-2.5 4-5H3c0 2.5 1.5 4.5 4 5z"/>
                                </svg>
                                <span id="create-password-text">Создать пароль</span>
                            </button>
                            <button class="btn btn-secondary" onclick="copyPassword()" id="copy-password-btn">
                                <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
                                    <path d="M4 2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1h1a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h1V2zm2 1V2h6v1H6zM3 5v8h10V5H3z"/>
                                </svg>
                                <span id="copy-password-text">Копировать</span>
                            </button>
                        </div>
                    </div>
                    <div class="password-strength" id="password-strength">
                        <div class="password-strength-bar"></div>
                    </div>
                    <div class="password-strength-text" id="password-strength-text"></div>
                    
                    <div class="password-options" id="password-options">
                        <div class="options-grid">
                            <div class="option-group">
                                <div class="option-row">
                                    <label for="password-length" id="password-length-label">Длина пароля:</label>
                                    <input type="number" id="password-length" min="12" max="64" value="32">
                                </div>
                            </div>
                            <div class="option-group">
                                <div class="option-row">
                                    <input type="checkbox" id="include-uppercase" checked>
                                    <label for="include-uppercase" id="include-uppercase-label">Заглавные буквы (A-Z)</label>
                                </div>
                                <div class="option-row">
                                    <input type="checkbox" id="include-lowercase" checked>
                                    <label for="include-lowercase" id="include-lowercase-label">Строчные буквы (a-z)</label>
                                </div>
                                <div class="option-row">
                                    <input type="checkbox" id="include-numbers" checked>
                                    <label for="include-numbers" id="include-numbers-label">Цифры (0-9)</label>
                                </div>
                                <div class="option-row">
                                    <input type="checkbox" id="include-symbols" checked>
                                    <label for="include-symbols" id="include-symbols-label">Символы (!@#$%^&* и др.)</label>
                                </div>
                                <div class="option-row">
                                    <input type="checkbox" id="exclude-similar" checked>
                                    <label for="exclude-similar" id="exclude-similar-label">Исключить похожие символы (0,O,1,l,I)</label>
                                </div>
                            </div>
                        </div>
                        <div class="generate-btn-container">
                            <button class="btn btn-warning" onclick="generateSecurePassword()" id="generate-secure-password-btn">
                                <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
                                    <path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zM7 14.5v-3h2v3c2.5-.5 4-2.5 4-5H3c0 2.5 1.5 4.5 4 5z"/>
                                </svg>
                                <span id="generate-secure-password-text">Сгенерировать безопасный пароль</span>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="filename" id="filename-label">Имя файла (без расширения):</label>
                    <input type="text" id="filename" placeholder="Введите имя для файла">
                </div>
                
                <div class="progress-container" id="encrypt-progress">
                    <div class="progress-bar" id="encrypt-progress-bar"></div>
                    <div class="progress-text" id="encrypt-progress-text">Обработка...</div>
                </div>
                
                <button class="btn btn-success" onclick="encryptData()" id="encrypt-button">
                    <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M15 8a3 3 0 0 1 3 3v5a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-5a3 3 0 0 1 3-3V5a5 5 0 1 1 10 0v3zM7 5v3h6V5a3 3 0 0 0-6 0z"/>
                    </svg>
                    <span id="encrypt-button-text">Зашифровать</span>
                </button>
                
                <div class="result-section" id="encrypt-result">
                    <h3 id="encrypt-result-title">Результат шифрования</h3>
                    <div class="action-buttons">
                        <button class="btn" onclick="downloadVoidFile()">
                            <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
                                <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                                <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
                            </svg>
                            <span id="download-void-text">Скачать .void файл</span>
                        </button>
                        <button class="btn btn-secondary" onclick="resetEncryptForm()">
                            <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
                                <path d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                                <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                            </svg>
                            <span id="new-encryption-text">Новое шифрование</span>
                        </button>
                    </div>
                </div>
            </div>
            
            <div id="decrypt-tab" class="tab-content">
                <h2 id="decrypt-title">Расшифровать данные</h2>
                
                <div class="form-group">
                    <label id="void-file-label">Загрузите .void файл:</label>
                    <div class="file-upload-area" id="void-file-upload-area">
                        <svg width="36" height="36" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                            <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
                        </svg>
                        <p id="void-file-upload-text">Нажмите для выбора файла</p>
                        <input type="file" id="void-file" accept=".void" style="display: none;">
                    </div>
                    <div class="selected-file" id="void-file-selected" style="display: none;">
                        <svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor" class="file-icon">
                            <path d="M6 2a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7.414A2 2 0 0 0 15.414 6L10 0.586A2 2 0 0 0 8.586 0H6zm0 2h2.586L12 6.414V16H6V4z"/>
                        </svg>
                        <span id="void-file-name"></span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="decrypt-password" id="decrypt-password-label">Пароль:</label>
                    <input type="password" id="decrypt-password" placeholder="Введите пароль для расшифровки" autocomplete="new-password">
                </div>
                
                <div class="progress-container" id="decrypt-progress">
                    <div class="progress-bar" id="decrypt-progress-bar"></div>
                    <div class="progress-text" id="decrypt-progress-text">Обработка...</div>
                </div>
                
                <button class="btn btn-success" onclick="decryptData()" id="decrypt-button">
                    <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M15 8h1a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h1V5a5 5 0 1 1 10 0v3zM7 5v3h6V5a3 3 0 0 0-6 0z"/>
                    </svg>
                    <span id="decrypt-button-text">Расшифровать</span>
                </button>
                
                <div class="result-section" id="decrypt-result">
                    <h3 id="decrypt-result-title">Расшифрованный контент</h3>
                    <div class="decrypted-content" id="decrypted-text"></div>
                    <div class="file-preview" id="file-preview"></div>
                    <div class="action-buttons">
                        <button class="btn btn-secondary" onclick="resetDecryptForm()">
                            <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
                                <path d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                                <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                            </svg>
                            <span id="new-decryption-text">Новая расшифровка</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="security-info">
            <h3 id="security-title">Информация о безопасности</h3>
            <p id="security-text">Ваши данные шифруются с использованием AES-256-GCM с ключом, полученным из вашего пароля с помощью PBKDF2 (100,000 итераций). Шифрование происходит полностью в вашем браузере - никакие данные не отправляются на сервер. Пароли генерируются с использованием криптографически безопасного генератора случайных чисел (Web Crypto API). Даже при доступе к этому исходному коду, без вашего пароля невозможно расшифровать ваши .void файлы.</p>
        </div>
    </div>
    
    <div class="notification-container" id="notification-container"></div>

    <script>
        let currentPassword = '';
        let encryptedData = null;
        let uploadedFiles = [];
        let decryptedFiles = [];
        let isEnglish = false;
        let notificationCounter = 0;
        const maxNotifications = 5;
        
        const texts = {
            en: {
                subtitle: "Secure encryption for your files",
                encryptTab: "Encrypt",
                decryptTab: "Decrypt",
                encryptTitle: "Encrypt Data",
                encryptTextLabel: "Text to encrypt:",
                fileInputLabel: "Add files (images, audio, video, others):",
                fileUploadText: "Click to select files",
                voidFileUploadText: "Click to select file",
                passwordLabel: "Password:",
                createPassword: "Create Password",
                copyPassword: "Copy",
                filenameLabel: "File name (without extension):",
                encryptButton: "Encrypt",
                encryptResultTitle: "Encryption Result",
                downloadVoid: "Download .void File",
                newEncryption: "New Encryption",
                decryptTitle: "Decrypt Data",
                voidFileLabel: "Upload .void file:",
                decryptPasswordLabel: "Password:",
                decryptButton: "Decrypt",
                decryptResultTitle: "Decrypted Content",
                newDecryption: "New Decryption",
                securityTitle: "Security Information",
                securityText: "Your data is encrypted using AES-256-GCM with a key derived from your password using PBKDF2 (100,000 iterations). The encryption happens entirely in your browser - no data is sent to any server. Passwords are generated using cryptographically secure random number generator (Web Crypto API). Even with access to this source code, without your password it's impossible to decrypt your .void files.",
                mySite: "My Site",
                lang: "RU",
                noText: "(no text)",
                remove: "Remove",
                passwordCopied: "Password copied to clipboard",
                fileDownloaded: "File downloaded successfully",
                dataEncrypted: "Data encrypted successfully",
                dataDecrypted: "Data decrypted successfully",
                errorNoData: "Enter text or add files for encryption",
                errorNoPassword: "Enter encryption password",
                errorNoFilename: "Enter file name",
                errorNoFile: "Select .void file for decryption",
                errorNoDecryptPassword: "Enter decryption password",
                errorWrongPassword: "Wrong password or corrupted file",
                passwordWeak: "Weak",
                passwordMedium: "Medium",
                passwordStrong: "Strong",
                passwordVeryStrong: "Very Strong",
                passwordLength: "Password length:",
                includeUppercase: "Uppercase letters (A-Z)",
                includeLowercase: "Lowercase letters (a-z)",
                includeNumbers: "Numbers (0-9)",
                includeSymbols: "Symbols (!@#$%^&* etc.)",
                excludeSimilar: "Exclude similar characters (0,O,1,l,I)",
                generateSecurePassword: "Generate Secure Password"
            },
            ru: {
                subtitle: "Безопасное шифрование для ваших файлов",
                encryptTab: "Зашифровать",
                decryptTab: "Расшифровать",
                encryptTitle: "Зашифровать данные",
                encryptTextLabel: "Текст для шифрования:",
                fileInputLabel: "Добавить файлы (изображения, аудио, видео, другое):",
                fileUploadText: "Нажмите для выбора файлов",
                voidFileUploadText: "Нажмите для выбора файла",
                passwordLabel: "Пароль:",
                createPassword: "Создать пароль",
                copyPassword: "Копировать",
                filenameLabel: "Имя файла (без расширения):",
                encryptButton: "Зашифровать",
                encryptResultTitle: "Результат шифрования",
                downloadVoid: "Скачать .void файл",
                newEncryption: "Новое шифрование",
                decryptTitle: "Расшифровать данные",
                voidFileLabel: "Загрузите .void файл:",
                decryptPasswordLabel: "Пароль:",
                decryptButton: "Расшифровать",
                decryptResultTitle: "Расшифрованный контент",
                newDecryption: "Новая расшифровка",
                securityTitle: "Информация о безопасности",
                securityText: "Ваши данные шифруются с использованием AES-256-GCM с ключом, полученным из вашего пароля с помощью PBKDF2 (100,000 итераций). Шифрование происходит полностью в вашем браузере - никакие данные не отправляются на сервер. Пароли генерируются с использованием криптографически безопасного генератора случайных чисел (Web Crypto API). Даже при доступе к этому исходному коду, без вашего пароля невозможно расшифровать ваши .void файлы.",
                mySite: "Мой сайт",
                lang: "EN",
                noText: "(текст отсутствует)",
                remove: "Удалить",
                passwordCopied: "Пароль скопирован в буфер обмена",
                fileDownloaded: "Файл успешно скачан",
                dataEncrypted: "Данные успешно зашифрованы",
                dataDecrypted: "Данные успешно расшифрованы",
                errorNoData: "Введите текст или добавьте файлы для шифрования",
                errorNoPassword: "Введите пароль для шифрования",
                errorNoFilename: "Введите имя для файла",
                errorNoFile: "Выберите .void файл для расшифровки",
                errorNoDecryptPassword: "Введите пароль для расшифровки",
                errorWrongPassword: "Неверный пароль или поврежденный файл",
                passwordWeak: "Слабый",
                passwordMedium: "Средний",
                passwordStrong: "Надежный",
                passwordVeryStrong: "Очень надежный",
                passwordLength: "Длина пароля:",
                includeUppercase: "Заглавные буквы (A-Z)",
                includeLowercase: "Строчные буквы (a-z)",
                includeNumbers: "Цифры (0-9)",
                includeSymbols: "Символы (!@#$%^&* и др.)",
                excludeSimilar: "Исключить похожие символы (0,O,1,l,I)",
                generateSecurePassword: "Сгенерировать безопасный пароль"
            }
        };
        
        document.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
            updateLanguage();
        });
        
        function setupEventListeners() {
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    switchTab(tabId);
                });
            });
            
            document.getElementById('lang-switcher').addEventListener('click', toggleLanguage);
            
            document.getElementById('password').addEventListener('input', function() {
                currentPassword = this.value;
                checkPasswordStrength();
            });
            
            document.getElementById('file-upload-area').addEventListener('click', function() {
                document.getElementById('file-input').click();
            });
            
            document.getElementById('void-file-upload-area').addEventListener('click', function() {
                document.getElementById('void-file').click();
            });
            
            document.getElementById('file-input').addEventListener('change', handleFileUpload);
            
            document.getElementById('void-file').addEventListener('change', function() {
                const file = this.files[0];
                if (file) {
                    document.getElementById('void-file-name').textContent = file.name;
                    document.getElementById('void-file-selected').style.display = 'flex';
                }
            });
        }
        
        function switchTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            document.getElementById(`${tabId}-tab`).classList.add('active');
            
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`.tab[data-tab="${tabId}"]`).classList.add('active');
        }
        
        function toggleLanguage() {
            isEnglish = !isEnglish;
            updateLanguage();
        }
        
        function updateLanguage() {
            const lang = isEnglish ? 'en' : 'ru';
            const t = texts[lang];
            
            document.getElementById('subtitle').textContent = t.subtitle;
            document.getElementById('encrypt-tab-text').textContent = t.encryptTab;
            document.getElementById('decrypt-tab-text').textContent = t.decryptTab;
            document.getElementById('encrypt-title').textContent = t.encryptTitle;
            document.getElementById('encrypt-text-label').textContent = t.encryptTextLabel;
            document.getElementById('file-input-label').textContent = t.fileInputLabel;
            document.getElementById('file-upload-text').textContent = t.fileUploadText;
            document.getElementById('void-file-upload-text').textContent = t.voidFileUploadText;
            document.getElementById('password-label').textContent = t.passwordLabel;
            document.getElementById('create-password-text').textContent = t.createPassword;
            document.getElementById('copy-password-text').textContent = t.copyPassword;
            document.getElementById('filename-label').textContent = t.filenameLabel;
            document.getElementById('encrypt-button-text').textContent = t.encryptButton;
            document.getElementById('encrypt-result-title').textContent = t.encryptResultTitle;
            document.getElementById('download-void-text').textContent = t.downloadVoid;
            document.getElementById('new-encryption-text').textContent = t.newEncryption;
            document.getElementById('decrypt-title').textContent = t.decryptTitle;
            document.getElementById('void-file-label').textContent = t.voidFileLabel;
            document.getElementById('decrypt-password-label').textContent = t.decryptPasswordLabel;
            document.getElementById('decrypt-button-text').textContent = t.decryptButton;
            document.getElementById('decrypt-result-title').textContent = t.decryptResultTitle;
            document.getElementById('new-decryption-text').textContent = t.newDecryption;
            document.getElementById('security-title').textContent = t.securityTitle;
            document.getElementById('security-text').textContent = t.securityText;
            document.getElementById('my-site-text').textContent = t.mySite;
            document.getElementById('lang-text').textContent = t.lang;
            
            document.getElementById('password-length-label').textContent = t.passwordLength;
            document.getElementById('include-uppercase-label').textContent = t.includeUppercase;
            document.getElementById('include-lowercase-label').textContent = t.includeLowercase;
            document.getElementById('include-numbers-label').textContent = t.includeNumbers;
            document.getElementById('include-symbols-label').textContent = t.includeSymbols;
            document.getElementById('exclude-similar-label').textContent = t.excludeSimilar;
            document.getElementById('generate-secure-password-text').textContent = t.generateSecurePassword;
            
            document.getElementById('encrypt-text').placeholder = isEnglish ? 
                "Enter the text you want to encrypt..." : 
                "Введите текст, который хотите зашифровать...";
            document.getElementById('password').placeholder = isEnglish ? 
                "Enter encryption password" : 
                "Введите пароль для шифрования";
            document.getElementById('filename').placeholder = isEnglish ? 
                "Enter file name" : 
                "Введите имя для файла";
            document.getElementById('decrypt-password').placeholder = isEnglish ? 
                "Enter decryption password" : 
                "Введите пароль для расшифровки";
            
            checkPasswordStrength();
        }
        
        function showNotification(message, isError = false, isWarning = false) {
            const container = document.getElementById('notification-container');
            const id = 'notification-' + (++notificationCounter);
            
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.id = id;
            
            notification.innerHTML = `
                <svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M10 2a6 6 0 0 0-6 6v3.586l-.707.707A1 1 0 0 0 4 14h12a1 1 0 0 0 .707-1.707L16 11.586V8a6 6 0 0 0-6-6zM10 18a3 3 0 0 1-3-3h6a3 3 0 0 1-3 3z"/>
                </svg>
                <span>${message}</span>
            `;
            
            if (isError) {
                notification.classList.add('error');
            } else if (isWarning) {
                notification.classList.add('warning');
            }
            
            container.appendChild(notification);
            
            setTimeout(() => {
                notification.classList.add('show');
            }, 10);
            
            const notifications = container.querySelectorAll('.notification');
            if (notifications.length > maxNotifications) {
                const oldest = notifications[notifications.length - 1];
                oldest.classList.add('hiding');
                setTimeout(() => {
                    if (oldest.parentNode) {
                        oldest.parentNode.removeChild(oldest);
                    }
                }, 400);
            }
            
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.classList.add('hiding');
                    setTimeout(() => {
                        if (notification.parentNode) {
                            notification.parentNode.removeChild(notification);
                        }
                    }, 400);
                }
            }, 4000);
        }
        
        function showPasswordOptions() {
            const options = document.getElementById('password-options');
            options.classList.toggle('active');
        }
        
        function generateSecurePassword() {
            const length = parseInt(document.getElementById('password-length').value) || 32;
            const includeUppercase = document.getElementById('include-uppercase').checked;
            const includeLowercase = document.getElementById('include-lowercase').checked;
            const includeNumbers = document.getElementById('include-numbers').checked;
            const includeSymbols = document.getElementById('include-symbols').checked;
            const excludeSimilar = document.getElementById('exclude-similar').checked;
            
            let charset = '';
            
            if (includeUppercase) {
                charset += excludeSimilar ? 'ABCDEFGHJKLMNPQRSTUVWXYZ' : 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            }
            
            if (includeLowercase) {
                charset += excludeSimilar ? 'abcdefghijkmnopqrstuvwxyz' : 'abcdefghijklmnopqrstuvwxyz';
            }
            
            if (includeNumbers) {
                charset += excludeSimilar ? '23456789' : '0123456789';
            }
            
            if (includeSymbols) {
                charset += '!@#$%^&*()_+-=[]{}|;:,.<>?';
            }
            
            if (charset === '') {
                charset = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*';
            }
            
            const array = new Uint32Array(length);
            crypto.getRandomValues(array);
            
            let password = '';
            for (let i = 0; i < length; i++) {
                password += charset[array[i] % charset.length];
            }
            
            const passwordField = document.getElementById('password');
            passwordField.value = password;
            currentPassword = password;
            
            checkPasswordStrength();
            
            const strengthBar = document.getElementById('password-strength');
            if (strengthBar.classList.contains('very-strong')) {
                showNotification(isEnglish ? "Secure password generated" : "Безопасный пароль сгенерирован");
            } else {
                showNotification(isEnglish ? "Password generated" : "Пароль сгенерирован");
            }
        }
        
        function checkPasswordStrength() {
            const password = document.getElementById('password').value;
            const strengthBar = document.getElementById('password-strength');
            const strengthText = document.getElementById('password-strength-text');
            
            if (password.length === 0) {
                strengthBar.className = 'password-strength';
                strengthText.textContent = '';
                return;
            }
            
            let score = 0;
            
            if (password.length >= 8) score++;
            if (password.length >= 12) score++;
            if (password.length >= 16) score++;
            if (password.length >= 20) score++;
            
            if (/[a-z]/.test(password)) score++;
            if (/[A-Z]/.test(password)) score++;
            if (/[0-9]/.test(password)) score++;
            if (/[^a-zA-Z0-9]/.test(password)) score++;
            
            const charVariety = (
                (/[a-z]/.test(password) ? 26 : 0) +
                (/[A-Z]/.test(password) ? 26 : 0) +
                (/[0-9]/.test(password) ? 10 : 0) +
                (/[^a-zA-Z0-9]/.test(password) ? 32 : 0)
            );
            
            const entropy = Math.log2(Math.pow(charVariety, password.length));
            
            if (entropy > 100) score++;
            if (entropy > 120) score++;
            if (entropy > 140) score++;
            
            let strengthLevel, strengthLabel;
            
            if (score <= 4) {
                strengthLevel = 'weak';
                strengthLabel = isEnglish ? texts.en.passwordWeak : texts.ru.passwordWeak;
            } else if (score <= 7) {
                strengthLevel = 'medium';
                strengthLabel = isEnglish ? texts.en.passwordMedium : texts.ru.passwordMedium;
            } else if (score <= 10) {
                strengthLevel = 'strong';
                strengthLabel = isEnglish ? texts.en.passwordStrong : texts.ru.passwordStrong;
            } else {
                strengthLevel = 'very-strong';
                strengthLabel = isEnglish ? texts.en.passwordVeryStrong : texts.ru.passwordVeryStrong;
            }
            
            strengthBar.className = 'password-strength ' + strengthLevel;
            strengthText.textContent = `${strengthLabel} (${Math.round(entropy)} bits entropy)`;
        }
        
        function copyPassword() {
            if (!currentPassword) {
                showNotification(isEnglish ? "No password to copy" : "Нет пароля для копирования", true);
                return;
            }
            
            navigator.clipboard.writeText(currentPassword).then(() => {
                showNotification(isEnglish ? texts.en.passwordCopied : texts.ru.passwordCopied);
            });
        }
        
        function handleFileUpload(e) {
            const files = e.target.files;
            const fileList = document.getElementById('file-list');
            fileList.innerHTML = '';
            
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                uploadedFiles.push(file);
                
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                
                fileItem.innerHTML = `
                    <div class="file-name">
                        <svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor" class="file-icon">
                            <path d="M6 2a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7.414A2 2 0 0 0 15.414 6L10 0.586A2 2 0 0 0 8.586 0H6zm0 2h2.586L12 6.414V16H6V4z"/>
                        </svg>
                        <span>${file.name}</span>
                    </div>
                    <button class="remove-file" onclick="removeFile(${uploadedFiles.length - 1})">
                        <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
                        </svg>
                        ${isEnglish ? texts.en.remove : texts.ru.remove}
                    </button>
                `;
                fileList.appendChild(fileItem);
            }
        }
        
        function removeFile(index) {
            uploadedFiles.splice(index, 1);
            document.getElementById('file-input').value = '';
            document.getElementById('file-list').innerHTML = '';
            
            uploadedFiles.forEach((file, i) => {
                const fileList = document.getElementById('file-list');
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                
                fileItem.innerHTML = `
                    <div class="file-name">
                        <svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor" class="file-icon">
                            <path d="M6 2a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7.414A2 2 0 0 0 15.414 6L10 0.586A2 2 0 0 0 8.586 0H6zm0 2h2.586L12 6.414V16H6V4z"/>
                        </svg>
                        <span>${file.name}</span>
                    </div>
                    <button class="remove-file" onclick="removeFile(${i})">
                        <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
                        </svg>
                        ${isEnglish ? texts.en.remove : texts.ru.remove}
                    </button>
                `;
                fileList.appendChild(fileItem);
            });
        }
        
        function resetEncryptForm() {
            document.getElementById('encrypt-text').value = '';
            document.getElementById('password').value = '';
            document.getElementById('filename').value = '';
            document.getElementById('file-input').value = '';
            document.getElementById('file-list').innerHTML = '';
            document.getElementById('encrypt-result').style.display = 'none';
            document.getElementById('password-options').classList.remove('active');
            document.getElementById('password-strength').className = 'password-strength';
            document.getElementById('password-strength-text').textContent = '';
            uploadedFiles = [];
            currentPassword = '';
            encryptedData = null;
        }
        
        function resetDecryptForm() {
            document.getElementById('void-file').value = '';
            document.getElementById('decrypt-password').value = '';
            document.getElementById('decrypt-result').style.display = 'none';
            document.getElementById('decrypted-text').innerHTML = '';
            document.getElementById('file-preview').innerHTML = '';
            document.getElementById('void-file-selected').style.display = 'none';
            decryptedFiles = [];
        }
        
        function updateProgress(progressBar, progressText, value, message) {
            progressBar.style.width = value + '%';
            progressText.textContent = message;
        }
        
        function stringToBytes(str) {
            return new TextEncoder().encode(str);
        }
        
        function bytesToString(bytes) {
            return new TextDecoder().decode(bytes);
        }
        
        function generateSalt(length = 16) {
            const salt = new Uint8Array(length);
            crypto.getRandomValues(salt);
            return salt;
        }
        
        async function deriveKey(password, salt) {
            const encoder = new TextEncoder();
            const keyMaterial = await crypto.subtle.importKey(
                'raw',
                encoder.encode(password),
                'PBKDF2',
                false,
                ['deriveKey']
            );
            
            return await crypto.subtle.deriveKey(
                {
                    name: 'PBKDF2',
                    salt: salt,
                    iterations: 100000,
                    hash: 'SHA-256'
                },
                keyMaterial,
                {
                    name: 'AES-GCM',
                    length: 256
                },
                false,
                ['encrypt', 'decrypt']
            );
        }
        
        async function encryptData() {
            const text = document.getElementById('encrypt-text').value;
            const password = document.getElementById('password').value;
            const filename = document.getElementById('filename').value;
            
            if (!text && uploadedFiles.length === 0) {
                showNotification(isEnglish ? texts.en.errorNoData : texts.ru.errorNoData, true);
                return;
            }
            
            if (!password) {
                showNotification(isEnglish ? texts.en.errorNoPassword : texts.ru.errorNoPassword, true);
                return;
            }
            
            if (!filename) {
                showNotification(isEnglish ? texts.en.errorNoFilename : texts.ru.errorNoFilename, true);
                return;
            }
            
            const strengthBar = document.getElementById('password-strength');
            if (strengthBar.classList.contains('weak') || strengthBar.classList.contains('medium')) {
                const confirmMessage = isEnglish ? 
                    "Your password is not very strong. Are you sure you want to continue?" :
                    "Ваш пароль недостаточно надежен. Вы уверены, что хотите продолжить?";
                
                if (!confirm(confirmMessage)) {
                    return;
                }
            }
            
            currentPassword = password;
            
            const progressContainer = document.getElementById('encrypt-progress');
            const progressBar = document.getElementById('encrypt-progress-bar');
            const progressText = document.getElementById('encrypt-progress-text');
            const encryptButton = document.getElementById('encrypt-button');
            
            progressContainer.style.display = 'block';
            encryptButton.disabled = true;
            
            try {
                updateProgress(progressBar, progressText, 10, isEnglish ? 'Preparing data...' : 'Подготовка данных...');
                
                const dataToEncrypt = {
                    text: text,
                    files: []
                };
                
                updateProgress(progressBar, progressText, 30, isEnglish ? 'Processing files...' : 'Обработка файлов...');
                
                for (const file of uploadedFiles) {
                    const fileData = await readFileAsArrayBuffer(file);
                    dataToEncrypt.files.push({
                        name: file.name,
                        type: file.type,
                        data: Array.from(new Uint8Array(fileData))
                    });
                }
                
                updateProgress(progressBar, progressText, 50, isEnglish ? 'Encrypting...' : 'Шифрование...');
                
                const jsonData = JSON.stringify(dataToEncrypt);
                const dataBytes = stringToBytes(jsonData);
                
                const salt = generateSalt();
                const iv = crypto.getRandomValues(new Uint8Array(12));
                
                const key = await deriveKey(password, salt);
                
                updateProgress(progressBar, progressText, 70, isEnglish ? 'Finalizing...' : 'Завершение...');
                
                const encryptedBytes = await crypto.subtle.encrypt(
                    {
                        name: 'AES-GCM',
                        iv: iv
                    },
                    key,
                    dataBytes
                );
                
                const result = new Uint8Array(salt.length + iv.length + encryptedBytes.byteLength);
                result.set(salt, 0);
                result.set(iv, salt.length);
                result.set(new Uint8Array(encryptedBytes), salt.length + iv.length);
                
                encryptedData = result;
                
                updateProgress(progressBar, progressText, 100, isEnglish ? 'Complete!' : 'Готово!');
                
                setTimeout(() => {
                    progressContainer.style.display = 'none';
                    encryptButton.disabled = false;
                    
                    document.getElementById('encrypt-result').style.display = 'block';
                    
                    showNotification(isEnglish ? texts.en.dataEncrypted : texts.ru.dataEncrypted);
                }, 500);
                
            } catch (error) {
                console.error('Encryption error:', error);
                progressContainer.style.display = 'none';
                encryptButton.disabled = false;
                showNotification(isEnglish ? texts.en.errorWrongPassword : texts.ru.errorWrongPassword, true);
            }
        }
        
        function readFileAsArrayBuffer(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = () => resolve(reader.result);
                reader.onerror = reject;
                reader.readAsArrayBuffer(file);
            });
        }
        
        function downloadVoidFile() {
            if (!encryptedData) {
                showNotification(isEnglish ? "No data to download" : "Нет данных для скачивания", true);
                return;
            }
            
            const filename = document.getElementById('filename').value + '.void';
            const blob = new Blob([encryptedData], { type: 'application/octet-stream' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showNotification(isEnglish ? texts.en.fileDownloaded : texts.ru.fileDownloaded);
        }
        
        async function decryptData() {
            const fileInput = document.getElementById('void-file');
            const password = document.getElementById('decrypt-password').value;
            
            if (!fileInput.files.length) {
                showNotification(isEnglish ? texts.en.errorNoFile : texts.ru.errorNoFile, true);
                return;
            }
            
            if (!password) {
                showNotification(isEnglish ? texts.en.errorNoDecryptPassword : texts.ru.errorNoDecryptPassword, true);
                return;
            }
            
            const progressContainer = document.getElementById('decrypt-progress');
            const progressBar = document.getElementById('decrypt-progress-bar');
            const progressText = document.getElementById('decrypt-progress-text');
            const decryptButton = document.getElementById('decrypt-button');
            
            progressContainer.style.display = 'block';
            decryptButton.disabled = true;
            
            try {
                updateProgress(progressBar, progressText, 10, isEnglish ? 'Reading file...' : 'Чтение файла...');
                
                const file = fileInput.files[0];
                const fileData = await readFileAsArrayBuffer(file);
                const encryptedBytes = new Uint8Array(fileData);
                
                updateProgress(progressBar, progressText, 30, isEnglish ? 'Extracting data...' : 'Извлечение данных...');
                
                const salt = encryptedBytes.slice(0, 16);
                const iv = encryptedBytes.slice(16, 28);
                const data = encryptedBytes.slice(28);
                
                updateProgress(progressBar, progressText, 50, isEnglish ? 'Decrypting...' : 'Расшифровка...');
                
                const key = await deriveKey(password, salt);
                
                const decryptedBytes = await crypto.subtle.decrypt(
                    {
                        name: 'AES-GCM',
                        iv: iv
                    },
                    key,
                    data
                );
                
                updateProgress(progressBar, progressText, 70, isEnglish ? 'Processing content...' : 'Обработка контента...');
                
                const decryptedString = bytesToString(new Uint8Array(decryptedBytes));
                const decryptedData = JSON.parse(decryptedString);
                
                document.getElementById('decrypted-text').textContent = 
                    decryptedData.text || (isEnglish ? texts.en.noText : texts.ru.noText);
                
                const filePreview = document.getElementById('file-preview');
                filePreview.innerHTML = '';
                
                if (decryptedData.files && decryptedData.files.length > 0) {
                    decryptedFiles = [];
                    
                    for (const fileInfo of decryptedData.files) {
                        const fileData = new Uint8Array(fileInfo.data);
                        const blob = new Blob([fileData], { type: fileInfo.type });
                        const url = URL.createObjectURL(blob);
                        
                        decryptedFiles.push({
                            name: fileInfo.name,
                            type: fileInfo.type,
                            blob: blob,
                            url: url
                        });
                        
                        const previewItem = document.createElement('div');
                        previewItem.className = 'preview-item';
                        
                        if (fileInfo.type.startsWith('image/')) {
                            previewItem.innerHTML = `
                                <h4>${fileInfo.name}</h4>
                                <img class="preview-image" src="${url}" alt="${fileInfo.name}">
                                <button class="btn download-btn" onclick="downloadDecryptedFile('${fileInfo.name}')">
                                    <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
                                        <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                                        <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
                                    </svg>
                                    ${isEnglish ? "Download" : "Скачать"}
                                </button>
                            `;
                        } else if (fileInfo.type.startsWith('audio/')) {
                            previewItem.innerHTML = `
                                <h4>${fileInfo.name}</h4>
                                <audio class="preview-audio" controls>
                                    <source src="${url}" type="${fileInfo.type}">
                                    ${isEnglish ? "Your browser does not support the audio element." : "Ваш браузер не поддерживает аудио элемент."}
                                </audio>
                                <button class="btn download-btn" onclick="downloadDecryptedFile('${fileInfo.name}')">
                                    <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
                                        <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                                        <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
                                    </svg>
                                    ${isEnglish ? "Download" : "Скачать"}
                                </button>
                            `;
                        } else if (fileInfo.type.startsWith('video/')) {
                            previewItem.innerHTML = `
                                <h4>${fileInfo.name}</h4>
                                <video class="preview-video" controls>
                                    <source src="${url}" type="${fileInfo.type}">
                                    ${isEnglish ? "Your browser does not support the video element." : "Ваш браузер не поддерживает видео элемент."}
                                </video>
                                <button class="btn download-btn" onclick="downloadDecryptedFile('${fileInfo.name}')">
                                    <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
                                        <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                                        <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
                                    </svg>
                                    ${isEnglish ? "Download" : "Скачать"}
                                </button>
                            `;
                        } else {
                            previewItem.innerHTML = `
                                <h4>${fileInfo.name}</h4>
                                <button class="btn download-btn" onclick="downloadDecryptedFile('${fileInfo.name}')">
                                    <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
                                        <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                                        <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
                                    </svg>
                                    ${isEnglish ? "Download" : "Скачать"}
                                </button>
                            `;
                        }
                        
                        filePreview.appendChild(previewItem);
                    }
                }
                
                updateProgress(progressBar, progressText, 100, isEnglish ? 'Complete!' : 'Готово!');
                
                setTimeout(() => {
                    progressContainer.style.display = 'none';
                    decryptButton.disabled = false;
                    
                    document.getElementById('decrypt-result').style.display = 'block';
                    showNotification(isEnglish ? texts.en.dataDecrypted : texts.ru.dataDecrypted);
                }, 500);
                
            } catch (error) {
                console.error('Decryption error:', error);
                progressContainer.style.display = 'none';
                decryptButton.disabled = false;
                showNotification(isEnglish ? texts.en.errorWrongPassword : texts.ru.errorWrongPassword, true);
            }
        }
        
        function downloadDecryptedFile(filename) {
            const file = decryptedFiles.find(f => f.name === filename);
            if (!file) return;
            
            const a = document.createElement('a');
            a.href = file.url;
            a.download = file.name;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            
            showNotification(`${isEnglish ? "File" : "Файл"} ${filename} ${isEnglish ? "downloaded" : "скачан"}`);
        }
    </script>
</body>
</html>
